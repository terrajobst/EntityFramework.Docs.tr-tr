---
title: Varlıklar - EF6 Self izleme
author: divega
ms.date: 2016-10-23
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: 5e60f5be-7bbb-4bf8-835e-0ac808d6c84a
caps.latest.revision: 3
ms.openlocfilehash: 2fb4e9f4d4008c57e90c49a011bebb320eb2bb58
ms.sourcegitcommit: 45494121254ad4fdcec613d1dd22d850068d6f39
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/08/2018
ms.locfileid: "37913531"
---
# <a name="self-tracking-entities"></a><span data-ttu-id="882be-102">Kendi kendine izleme varlıkları</span><span class="sxs-lookup"><span data-stu-id="882be-102">Self-tracking entities</span></span>

> [!IMPORTANT]
> <span data-ttu-id="882be-103">Artık, self tracking varlıkları şablon kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="882be-103">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="882be-104">Bu yalnızca var olan uygulamaları desteklemek kullanılabilir olmaya devam edecek.</span><span class="sxs-lookup"><span data-stu-id="882be-104">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="882be-105">Uygulamanızın çalışma bağlantısı kesilmiş varlıklar grafikleriyle gerektiriyorsa, başka alternatifler gibi düşünün [izlenebilir varlıkları](http://trackableentities.github.io/), Self-Tracking-daha etkin bir şekilde tarafından geliştirilen varlıklara benzer bir teknoloji olan Topluluk veya alt düzey değişiklik API'leri izleme kullanarak özel kod yazma.</span><span class="sxs-lookup"><span data-stu-id="882be-105">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](http://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>

<span data-ttu-id="882be-106">Entity Framework tabanlı bir uygulama, nesnelerinizi değişiklikleri izlemek için bir bağlam sorumludur.</span><span class="sxs-lookup"><span data-stu-id="882be-106">In an Entity Framework-based application, a context is responsible for tracking changes in your objects.</span></span> <span data-ttu-id="882be-107">Veritabanı değişiklikleri kalıcı hale getirmek için SaveChanges yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="882be-107">You then use the SaveChanges method to persist the changes to the database.</span></span> <span data-ttu-id="882be-108">N katmanlı uygulamalar ile çalışırken, varlık nesneler bağlamdan genellikle kesilir ve değişiklikleri ve rapor bağlamına bu değişiklikleri izlemek nasıl karar vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="882be-108">When working with N-Tier applications, the entity objects are usually disconnected from the context and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="882be-109">Varlıkları (Ste'ler) Self izleme, tüm katman değişiklikleri izlemenize ve ardından bu değişikliklerin kaydedilmesi için bir bağlam içinde tekrarlama yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="882be-109">Self-Tracking Entities (STEs) can help you track changes in any tier and then replay these changes into a context to be saved.</span></span>  

<span data-ttu-id="882be-110">Yalnızca bağlam bir katmanda kullanılabilir değilse, burada Nesne grafiğini değişiklikler yapılır Ste'leri kullanın.</span><span class="sxs-lookup"><span data-stu-id="882be-110">Use STEs only if the context is not available on a tier where the changes to the object graph are made.</span></span> <span data-ttu-id="882be-111">İçerik varsa, bağlam ilgileniriz değişiklikleri izlemek çünkü Ste'leri kullanmaya gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="882be-111">If the context is available, there is no need to use STEs because the context will take care of tracking changes.</span></span>  

<span data-ttu-id="882be-112">Bu şablonu öğesi iki .tt (metin şablonu) dosyaları oluşturur:</span><span class="sxs-lookup"><span data-stu-id="882be-112">This template item generates two .tt (text template) files:</span></span>  

- <span data-ttu-id="882be-113">**\<Model adı\>.tt** varlık türleri ve kendi kendine varlıkları ve durumunun ayarlanması izin veren genişletme yöntemleri izleyerek kullanılan değişiklik izleme mantığı içeren bir yardımcı sınıfı dosyası oluşturur kendi kendine izleme varlıklarda.</span><span class="sxs-lookup"><span data-stu-id="882be-113">The **\<model name\>.tt** file generates the entity types and a helper class that contains the change-tracking logic that is used by self-tracking entities and the extension methods that allow setting state on self-tracking entities.</span></span>  
- <span data-ttu-id="882be-114">**\<Model adı\>. Context.tt** dosyası oluşturur, türetilmiş bir bağlam ve içeren bir uzantı sınıfı **ApplyChanges** yöntemleri **ObjectContext** ve **ObjectSet** sınıfları.</span><span class="sxs-lookup"><span data-stu-id="882be-114">The **\<model name\>.Context.tt** file generates a derived context and an extension class that contains **ApplyChanges** methods for the **ObjectContext** and **ObjectSet** classes.</span></span> <span data-ttu-id="882be-115">Bu yöntemler, değişiklikleri veritabanına kaydetmek için gerçekleştirilmesi gereken işlemler kümesini çıkarsanacak varlıkları kendi izleme Graph'te yer alan değişiklik izleme bilgileri inceleyin.</span><span class="sxs-lookup"><span data-stu-id="882be-115">These methods examine the change-tracking information that is contained in the graph of self-tracking entities to infer the set of operations that must be performed to save the changes in the database.</span></span>  

## <a name="get-started"></a><span data-ttu-id="882be-116">Başlarken</span><span class="sxs-lookup"><span data-stu-id="882be-116">Get Started</span></span>  

<span data-ttu-id="882be-117">Başlamak için ziyaret [Self-Tracking varlıkları izlenecek](walkthrough.md) sayfası.</span><span class="sxs-lookup"><span data-stu-id="882be-117">To get started, visit the [Self-Tracking Entities Walkthrough](walkthrough.md) page.</span></span>  

## <a name="considerations-when-working-with-self-tracking-entities"></a><span data-ttu-id="882be-118">Varlıkları kendi izleme ile çalışırken dikkat edilmesi gerekenler</span><span class="sxs-lookup"><span data-stu-id="882be-118">Considerations When Working with Self-Tracking Entities</span></span>  
> [!IMPORTANT]
> <span data-ttu-id="882be-119">Artık, self tracking varlıkları şablon kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="882be-119">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="882be-120">Bu yalnızca var olan uygulamaları desteklemek kullanılabilir olmaya devam edecek.</span><span class="sxs-lookup"><span data-stu-id="882be-120">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="882be-121">Uygulamanızın çalışma bağlantısı kesilmiş varlıklar grafikleriyle gerektiriyorsa, başka alternatifler gibi düşünün [izlenebilir varlıkları](http://trackableentities.github.io/), Self-Tracking-daha etkin bir şekilde tarafından geliştirilen varlıklara benzer bir teknoloji olan Topluluk veya alt düzey değişiklik API'leri izleme kullanarak özel kod yazma.</span><span class="sxs-lookup"><span data-stu-id="882be-121">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](http://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>

<span data-ttu-id="882be-122">Aşağıdaki Self izleme varlıkları ile çalışırken göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="882be-122">Consider the following when working with self-tracking entities:</span></span>  

- <span data-ttu-id="882be-123">İstemci projenize varlık türleri içeren derlemeye bir başvurusu olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="882be-123">Make sure that your client project has a reference to the assembly containing the entity types.</span></span> <span data-ttu-id="882be-124">Yalnızca hizmet başvurusunu istemci projesi eklerseniz, istemci projesinin WCF proxy türleri değil gerçek Self izleme varlık türleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="882be-124">If you add only the service reference to the client project, the client project will use the WCF proxy types and not the actual self-tracking entity types.</span></span> <span data-ttu-id="882be-125">Başka bir deyişle, varlık izlemeyi istemcide Yönet otomatik bildirim özellikleri almazsınız.</span><span class="sxs-lookup"><span data-stu-id="882be-125">This means that you will not get the automated notification features that manage the tracking of the entities on the client.</span></span> <span data-ttu-id="882be-126">Kasıtlı olarak varlık türleri dahil etmek istemiyorsanız, el ile hizmete geri gönderilecek değişiklikleri için istemci üzerinde değişiklik izleme bilgilerini ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="882be-126">If you intentionally do not want to include the entity types, you will have to manually set change-tracking information on the client for the changes to be sent back to the service.</span></span>  
- <span data-ttu-id="882be-127">Hizmet işlemi çağrıları, durum bilgisiz ve nesne bağlamı yeni bir örneğini oluşturun.</span><span class="sxs-lookup"><span data-stu-id="882be-127">Calls to the service operation should be stateless and create a new instance of object context.</span></span> <span data-ttu-id="882be-128">Ayrıca nesne bağlamında oluşturmanız önerilir bir **kullanarak** blok.</span><span class="sxs-lookup"><span data-stu-id="882be-128">We also recommend that you create object context in a **using** block.</span></span>  
- <span data-ttu-id="882be-129">Çağrı ve graph el ile yinelemek zorunda hizmeti istemcisi değiştirildiği graf gönderin ve istemcide aynı grafiğe çalışmaya devam etmek istiyorsanız, **AcceptChanges** her nesneye yöntemi değişiklik İzleyici sıfırlayın.</span><span class="sxs-lookup"><span data-stu-id="882be-129">When you send the graph that was modified on the client to the service and then intend to continue working with the same graph on the client, you have to manually iterate through the graph and call the **AcceptChanges** method on each object to reset the change tracker.</span></span>  

    > <span data-ttu-id="882be-130">Grafınızı nesneleri veritabanı tarafından oluşturulan değerleri (örneğin, kimlik veya eşzamanlılık) özellikleriyle içeriyorsa, Entity Framework bu özelliklerin değerlerini sonra veritabanı tarafından oluşturulan değerleri değiştirir **SaveChanges** yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="882be-130">If objects in your graph contain properties with database-generated values (for example, identity or concurrency values), Entity Framework will replace values of these properties with the database-generated values after the **SaveChanges** method is called.</span></span> <span data-ttu-id="882be-131">Kaydedilen nesneleri veya nesneler için oluşturulan özellik değerlerinin listesini istemciye geri dönmek için hizmet işlemi uygulayabilir.</span><span class="sxs-lookup"><span data-stu-id="882be-131">You can implement your service operation to return saved objects or a list of generated property values for the objects back to the client.</span></span> <span data-ttu-id="882be-132">İstemci nesneleri veya özellik değerlerini hizmet işleminden döndürülen nesne örneklerini veya nesnesi özellik değerleri yerine gerekir.</span><span class="sxs-lookup"><span data-stu-id="882be-132">The client would then need to replace the object instances or object property values with the objects or property values returned from the service operation.</span></span>  
- <span data-ttu-id="882be-133">Birden çok hizmet istekleri grafiklerinden birleştirme, sonuçta elde edilen grafiğin yinelenen anahtar değerleri ile nesneler neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="882be-133">Merging graphs from multiple service requests may introduce objects with duplicate key values in the resulting graph.</span></span> <span data-ttu-id="882be-134">Entity Framework çağırdığınızda yinelenen anahtarlarla nesneleri kaldırmaz **ApplyChanges** yöntemi ancak bunun yerine bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="882be-134">Entity Framework does not remove the objects with duplicate keys when you call the **ApplyChanges** method but instead throws an exception.</span></span> <span data-ttu-id="882be-135">Yinelenen anahtar değerlerine sahip grafikler aşağıdaki blog içinde açıklanan desenlerden birini izleyin olmamasına özen gösterin: [Self-Tracking varlıklar: ApplyChanges ve yinelenen varlıkları](http://go.microsoft.com/fwlink/?LinkID=205119&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="882be-135">To avoid having graphs with duplicate key values follow one of the patterns described in the following blog: [Self-Tracking Entities: ApplyChanges and duplicate entities](http://go.microsoft.com/fwlink/?LinkID=205119&clcid=0x409).</span></span>  
- <span data-ttu-id="882be-136">Yabancı anahtar özelliğini ayarlayarak nesneleri arasındaki ilişki değiştirdiğinizde, başvuru gezinti özelliği ayarlanmış null ve istemci üzerindeki uygun asıl varlığa eşitlenmiş değil.</span><span class="sxs-lookup"><span data-stu-id="882be-136">When you change the relationship between objects by setting the foreign key property, the reference navigation property is set to null and not synchronized to the appropriate principal entity on the client.</span></span> <span data-ttu-id="882be-137">Grafik nesne bağlamına eklendikten sonra (örneğin, çağırdıktan sonra **ApplyChanges** yöntemi), yabancı anahtar özellikler ve gezinti özellikleri eşitlenir.</span><span class="sxs-lookup"><span data-stu-id="882be-137">After the graph is attached to the object context (for example, after you call the **ApplyChanges** method), the foreign key properties and navigation properties are synchronized.</span></span>  

    > <span data-ttu-id="882be-138">Yabancı anahtar ilişkisine art arda silme belirttiyseniz, uygun asıl nesneyle eşitlenmiş başvuru gezinme özelliğinin olmaması bir sorun olabilir.</span><span class="sxs-lookup"><span data-stu-id="882be-138">Not having a reference navigation property synchronized with the appropriate principal object could be an issue if you have specified cascade delete on the foreign key relationship.</span></span> <span data-ttu-id="882be-139">Asıl silerseniz, bağımlı nesneleri silme dağıtılmaz.</span><span class="sxs-lookup"><span data-stu-id="882be-139">If you delete the principal, the delete will not be propagated to the dependent objects.</span></span> <span data-ttu-id="882be-140">Belirtilen art arda silme varsa, yabancı anahtar özelliği ayarı yerine ilişkilerini değiştirmek için Gezinti özelliklerini kullanın.</span><span class="sxs-lookup"><span data-stu-id="882be-140">If you have cascade deletes specified, use navigation properties to change relationships instead of setting the foreign key property.</span></span>  
- <span data-ttu-id="882be-141">Kendi kendine izleme varlıkları yavaş yükleme gerçekleştirmek için etkin değil.</span><span class="sxs-lookup"><span data-stu-id="882be-141">Self-tracking entities are not enabled to perform lazy loading.</span></span>  
- <span data-ttu-id="882be-142">İkili serileştirme ve seri hale getirme için ASP.NET durumu yönetim nesneleri desteklenmiyor varlıkları kendi kendine izleyerek.</span><span class="sxs-lookup"><span data-stu-id="882be-142">Binary serialization and serialization to ASP.NET state management objects is not supported by self-tracking entities.</span></span> <span data-ttu-id="882be-143">Ancak, ikili serileştirme desteği eklemek için şablonunu özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882be-143">However, you can customize the template to add the binary serialization support.</span></span> <span data-ttu-id="882be-144">Daha fazla bilgi için [kullanarak ikili serileştirme ve ViewState Self-Tracking varlıklarla](http://go.microsoft.com/fwlink/?LinkId=199208).</span><span class="sxs-lookup"><span data-stu-id="882be-144">For more information, see [Using Binary Serialization and ViewState with Self-Tracking Entities](http://go.microsoft.com/fwlink/?LinkId=199208).</span></span>  

### <a name="security-considerations"></a><span data-ttu-id="882be-145">Güvenlik Değerlendirmeleri</span><span class="sxs-lookup"><span data-stu-id="882be-145">Security Considerations</span></span>  

<span data-ttu-id="882be-146">Aşağıdaki güvenlik konuları hesaba kendi izleme varlıkları ile çalışırken dikkat edilmelidir:</span><span class="sxs-lookup"><span data-stu-id="882be-146">The following security considerations should be taken into account when working with self-tracking entities:</span></span>  

- <span data-ttu-id="882be-147">Hizmet istekleri almak veya güvenilir olmayan bir istemci veya güvenilir olmayan bir kanal aracılığıyla verileri güncelleştirmek için güven yok.</span><span class="sxs-lookup"><span data-stu-id="882be-147">A service should not trust requests to retrieve or update data from a non-trusted client or through a non-trusted channel.</span></span> <span data-ttu-id="882be-148">Bir istemci kimlik doğrulaması yapılması gerekir: güvenli bir kanal ya da ileti zarfı kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="882be-148">A client must be authenticated: a secure channel or message envelope should be used.</span></span> <span data-ttu-id="882be-149">Beklenen ve yasal değişiklikleri verilen senaryo için uygun olmak için güncelleştirme veya veri almak için istemcilerin istekleri doğrulanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="882be-149">Clients' requests to update or retrieve data must be validated to ensure they conform to expected and legitimate changes for the given scenario.</span></span>  
- <span data-ttu-id="882be-150">Varlık anahtarları (örneğin, sosyal güvenlik numaraları) hassas bilgiler kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="882be-150">Avoid using sensitive information as entity keys (for example, social security numbers).</span></span> <span data-ttu-id="882be-151">Bu, tam olarak güvenilmeyen bir istemci kendi izleme varlık grafiklere gizli bilgileri yanlışlıkla serileştirmek olasılığını azaltır.</span><span class="sxs-lookup"><span data-stu-id="882be-151">This mitigates the possibility of inadvertently serializing sensitive information in the self-tracking entity graphs to a client that is not fully trusted.</span></span> <span data-ttu-id="882be-152">Bağımsız ilişkilerini serileştirilmekte olan ilgili bir varlığın özgün anahtar istemciye gönderilebilir.</span><span class="sxs-lookup"><span data-stu-id="882be-152">With independent associations, the original key of an entity that is related to the one that is being serialized might be sent to the client as well.</span></span>  
- <span data-ttu-id="882be-153">İstemci katmanı, gizli verileri içeren bir özel durum iletileri yayılmasını önlemek için çağrılar **ApplyChanges** ve **SaveChanges** sunucu üzerinde özel durum işleme kodu katmanı alınmalı.</span><span class="sxs-lookup"><span data-stu-id="882be-153">To avoid propagating exception messages that contain sensitive data to the client tier, calls to **ApplyChanges** and **SaveChanges** on the server tier should be wrapped in exception-handling code.</span></span>  
