---
title: Migrate.exe - EF6 kullanarak
author: divega
ms.date: 2016-10-23
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: 989ea862-e936-4c85-926a-8cfbef5df5b8
caps.latest.revision: 3
ms.openlocfilehash: 3a9bc47d2c18abe6ca70b92a8758b4d95010a464
ms.sourcegitcommit: f05e7b62584cf228f17390bb086a61d505712e1b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/08/2018
ms.locfileid: "37912060"
---
# <a name="using-migrateexe"></a><span data-ttu-id="5803a-102">Migrate.exe kullanma</span><span class="sxs-lookup"><span data-stu-id="5803a-102">Using migrate.exe</span></span>
<span data-ttu-id="5803a-103">Code First geçişleri, bir veritabanında güncelleştirmek için kullanılabilir visual studio içinde ancak komut satırı aracı migrate.exe da yürütülebilir.</span><span class="sxs-lookup"><span data-stu-id="5803a-103">Code First Migrations can be used to update a database from inside visual studio, but can also be executed via the command line tool migrate.exe.</span></span> <span data-ttu-id="5803a-104">Bu sayfa bir veritabanında geçişleri yürütülecek migrate.exe kullanma hakkında hızlı bir genel bakış sunar.</span><span class="sxs-lookup"><span data-stu-id="5803a-104">This page will give a quick overview on how to use migrate.exe to execute migrations against a database.</span></span>

> [!NOTE]
> <span data-ttu-id="5803a-105">Bu makalede, temel senaryolarda Code First Migrations nasıl kullanılacağını varsayar.</span><span class="sxs-lookup"><span data-stu-id="5803a-105">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="5803a-106">Sizin sonra okumak ihtiyacınız olacak [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) devam etmeden önce.</span><span class="sxs-lookup"><span data-stu-id="5803a-106">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="copy-migrateexe"></a><span data-ttu-id="5803a-107">Migrate.exe kopyalayın</span><span class="sxs-lookup"><span data-stu-id="5803a-107">Copy migrate.exe</span></span>

<span data-ttu-id="5803a-108">NuGet kullanarak Entity Framework yüklediğinizde migrate.exe indirilen paketi Araçlar klasöründen olacaktır.</span><span class="sxs-lookup"><span data-stu-id="5803a-108">When you install Entity Framework using NuGet migrate.exe will be inside the tools folder of the downloaded package.</span></span> <span data-ttu-id="5803a-109">İçinde &lt;proje klasörü&gt;\\paketleri\\EntityFramework.&lt; Sürüm&gt;\\araçları</span><span class="sxs-lookup"><span data-stu-id="5803a-109">In &lt;project folder&gt;\\packages\\EntityFramework.&lt;version&gt;\\tools</span></span>

<span data-ttu-id="5803a-110">Migrate.exe sonra geçiş içeren derlemenin konumuna kopyalamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-110">Once you have migrate.exe then you need to copy it to the location of the assembly that contains your migrations.</span></span>

<span data-ttu-id="5803a-111">Uygulamanız .NET 4 hedefliyor ve 4.5 değil, ardından kopyalamak ihtiyacınız olacak **Redirect.config** konuma olarak yanı sıra ve yeniden adlandırmak **migrate.exe.config**. Bu, böylelikle Migrate.exe Entity Framework derlemeyi bulabilir olması için doğru bağlama yeniden yönlendirmeleri alır.</span><span class="sxs-lookup"><span data-stu-id="5803a-111">If your application targets .NET 4, and not 4.5, then you will need to copy the **Redirect.config** into the location as well and rename it **migrate.exe.config**. This is so that migrate.exe gets the correct binding redirects to be able to locate the Entity Framework assembly.</span></span>

| <span data-ttu-id="5803a-112">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="5803a-112">.NET 4.5</span></span>                                   | <span data-ttu-id="5803a-113">.NET 4.0</span><span class="sxs-lookup"><span data-stu-id="5803a-113">.NET 4.0</span></span>                                   |
|:-------------------------------------------|:-------------------------------------------|
| ![Net45Files](~/ef6/media/net45files.png)  | ![Net40Files](~/ef6/media/net40files.png)  |

> [!NOTE]
> <span data-ttu-id="5803a-116">migrate.exe x64 desteklemiyor derlemeler.</span><span class="sxs-lookup"><span data-stu-id="5803a-116">migrate.exe doesn't support x64 assemblies.</span></span>

## <a name="using-migrateexe"></a><span data-ttu-id="5803a-117">Migrate.exe kullanma</span><span class="sxs-lookup"><span data-stu-id="5803a-117">Using Migrate.exe</span></span>

<span data-ttu-id="5803a-118">Ardından doğru klasöre migrate.exe taşıdığınızda geçişleri veritabanında yürütmek için kullanabilmek için olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5803a-118">Once you have moved migrate.exe to the correct folder then you should be able to use it to execute migrations against the database.</span></span> <span data-ttu-id="5803a-119">Yardımcı program yapmak için tasarlanmış olan geçişleri yürütün.</span><span class="sxs-lookup"><span data-stu-id="5803a-119">All the utility is designed to do is execute migrations.</span></span> <span data-ttu-id="5803a-120">Geçişleri oluşturmak veya bir SQL betiği oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5803a-120">It cannot generate migrations or create a SQL script.</span></span>

### <a name="see-options"></a><span data-ttu-id="5803a-121">Bkz. seçenekleri</span><span class="sxs-lookup"><span data-stu-id="5803a-121">See options</span></span>

``` console
Migrate.exe /?
```

<span data-ttu-id="5803a-122">Yukarıdaki bu yardımcı programı, EntityFramework.dll migrate.exe Bunun çalışması sırayla çalıştırdığınız aynı konumda olması gerekecektir not ile ilişkili Yardım sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="5803a-122">The above will display the help page associated with this utility, note that you will need to have the EntityFramework.dll in the same location that you are running migrate.exe in order for this to work.</span></span>

### <a name="migrate-to-the-latest-migration"></a><span data-ttu-id="5803a-123">En son geçiş için geçiş</span><span class="sxs-lookup"><span data-stu-id="5803a-123">Migrate to the latest migration</span></span>

``` console
Migrate.exe MyMvcApplication.dll /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="5803a-124">Yapılandırma dosyası belirtmezseniz, ne zaman migrate.exe yalnızca zorunlu bir parametre çalıştırmayı denediğiniz geçişleri içeren derlemenin, derleme çalışıyor ancak tüm kuralı kullanacağı ayarları temel.</span><span class="sxs-lookup"><span data-stu-id="5803a-124">When running migrate.exe the only mandatory parameter is the assembly, which is the assembly that contains the migrations that you are trying to run, but it will use all convention based settings if you do not specify the configuration file.</span></span>

### <a name="migrate-to-a-specific-migration"></a><span data-ttu-id="5803a-125">Belirli bir geçiş için geçiş</span><span class="sxs-lookup"><span data-stu-id="5803a-125">Migrate to a specific migration</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /targetMigration=”AddTitle”
```

<span data-ttu-id="5803a-126">Ardından belirli bir geçiş kadar geçiş çalıştırmak istiyorsanız, geçiş adını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5803a-126">If you want to run migrations up to a specific migration, then you can specify the name of the migration.</span></span> <span data-ttu-id="5803a-127">Bu tüm önceki geçişler gerektiği gibi çalışır belirtilen geçiş alma kadar.</span><span class="sxs-lookup"><span data-stu-id="5803a-127">This will run all previous migrations as required until getting to the migration specified.</span></span>

### <a name="specify-working-directory"></a><span data-ttu-id="5803a-128">Çalışma dizini belirtin</span><span class="sxs-lookup"><span data-stu-id="5803a-128">Specify working directory</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /startupDirectory=”c:\\MyApp”
```

<span data-ttu-id="5803a-129">Ardından, derleme bağımlılıkları içeriyorsa ya da çalışma dizinine göre dosyalarını okur startupDirectory ayarlamak almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-129">If you assembly has dependencies or reads files relative to the working directory then you will need to set startupDirectory.</span></span>

### <a name="specify-migration-configuration-to-use"></a><span data-ttu-id="5803a-130">Kullanmak için geçiş yapılandırmasını belirtin</span><span class="sxs-lookup"><span data-stu-id="5803a-130">Specify migration configuration to use</span></span>

``` console
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="5803a-131">Birden fazla geçiş yapılandırma sınıfınız varsa, DbMigrationConfiguration devralan sınıflar sonra bu yürütme için kullanılacak olan belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-131">If you have multiple migration configuration classes, classes inheriting from DbMigrationConfiguration, then you need to specify which is to be used for this execution.</span></span> <span data-ttu-id="5803a-132">Bu, isteğe bağlı ikinci parametre bir anahtar olmadan sağlayarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="5803a-132">This is specified by providing the optional second parameter without a switch as above.</span></span>

### <a name="provide-connection-string"></a><span data-ttu-id="5803a-133">Bağlantı dizesini belirtin</span><span class="sxs-lookup"><span data-stu-id="5803a-133">Provide connection string</span></span>

``` console
Migrate.exe BlogDemo.dll /connectionString=”Data Source=localhost;Initial Catalog=BlogDemo;Integrated Security=SSPI” /connectionProviderName=”System.Data.SqlClient”
```

<span data-ttu-id="5803a-134">Ardından bir bağlantı dizesi komut satırında belirtmek istiyorsanız sağlayıcı adı da sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-134">If you wish to specify a connection string at the command line then you must also provide the provider name.</span></span> <span data-ttu-id="5803a-135">Sağlayıcı adı belirtmeden bir özel durum neden olur.</span><span class="sxs-lookup"><span data-stu-id="5803a-135">Not specifying the provider name will cause an exception.</span></span>

## <a name="common-problems"></a><span data-ttu-id="5803a-136">Yaygın sorunlar</span><span class="sxs-lookup"><span data-stu-id="5803a-136">Common Problems</span></span>

| <span data-ttu-id="5803a-137">Hata İletisi</span><span class="sxs-lookup"><span data-stu-id="5803a-137">Error Message</span></span>                                                                                                                                                                                                                                                                                                                      | <span data-ttu-id="5803a-138">Çözüm</span><span class="sxs-lookup"><span data-stu-id="5803a-138">Solution</span></span>                                                                                                                                                                                                                                                                                             |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5803a-139">İşlenmeyen özel durum: System.IO.FileLoadException: dosya veya derleme yüklenemedi ' EntityFramework, sürüm 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 ' veya bağımlılıklarından biri.</span><span class="sxs-lookup"><span data-stu-id="5803a-139">Unhandled Exception: System.IO.FileLoadException:  Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="5803a-140">Bildirim tanımı bulunduğu derlemenin, derleme başvurusunu eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="5803a-140">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="5803a-141">(HRESULT özel durum: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="5803a-141">(Exception from HRESULT: 0x80131040)</span></span>         | <span data-ttu-id="5803a-142">Bu, genellikle Redirect.config dosya bir .NET 4 uygulaması çalıştıran anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="5803a-142">This typically means that you are running a .NET 4 application without the Redirect.config file.</span></span> <span data-ttu-id="5803a-143">Redirect.config migrate.exe aynı konuma kopyalayın ve migrate.exe.config için yeniden adlandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-143">You need to copy the Redirect.config to the same location as migrate.exe and rename it to migrate.exe.config.</span></span>                                                                                       |
| <span data-ttu-id="5803a-144">İşlenmeyen özel durum: System.IO.FileLoadException: dosya veya derleme yüklenemedi ' EntityFramework, sürüm 4.4.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 ' veya bağımlılıklarından biri.</span><span class="sxs-lookup"><span data-stu-id="5803a-144">Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="5803a-145">Bildirim tanımı bulunduğu derlemenin, derleme başvurusunu eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="5803a-145">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="5803a-146">(HRESULT özel durum: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="5803a-146">(Exception from HRESULT: 0x80131040)</span></span>          | <span data-ttu-id="5803a-147">Bu özel durumun Redirect.config uygulamayla migrate.exe konuma kopyalanan bir .NET 4.5 çalıştırdığınız anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="5803a-147">This exception means that you are running a .NET 4.5 application with the Redirect.config copied to the migrate.exe location.</span></span> <span data-ttu-id="5803a-148">Ardından uygulamanız .NET 4.5 ise yeniden yönlendirmeleri içinde ile yapılandırma dosyası olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="5803a-148">If your app is .NET 4.5 then you do not need to have the config file with the redirects inside.</span></span> <span data-ttu-id="5803a-149">Migrate.exe.config dosyasını silin.</span><span class="sxs-lookup"><span data-stu-id="5803a-149">Delete the migrate.exe.config file.</span></span>                                    |
| <span data-ttu-id="5803a-150">Hata: Bekleyen değişiklikleri ve otomatik geçişi devre dışı olduğundan geçerli model eşleştirilecek veritabanı güncelleştirilemedi.</span><span class="sxs-lookup"><span data-stu-id="5803a-150">ERROR: Unable to update database to match the current model because there are pending changes and automatic migration is disabled.</span></span> <span data-ttu-id="5803a-151">Kod tabanlı bir geçiş için bekleyen model değişiklikleri yazma ya da otomatik geçişi etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="5803a-151">Either write the pending model changes to a code-based migration or enable automatic migration.</span></span> <span data-ttu-id="5803a-152">İçin DbMigrationsConfiguration.AutomaticMigrationsEnabled etkinleştir otomatik geçiş için true olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="5803a-152">Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.</span></span> | <span data-ttu-id="5803a-153">Çalışan bir geçiş modelinde yapılan değişikliklerle başa oluşturmadıysanız ve veritabanı modeli eşleşmiyor, geçiş işlemi gerçekleştirirseniz bu hata oluşur.</span><span class="sxs-lookup"><span data-stu-id="5803a-153">This error occurs if running migrate when you haven’t created a migration to cope with changes made to the model, and the database does not match the model.</span></span> <span data-ttu-id="5803a-154">Sonra veritabanını yükseltmek için bir geçiş oluşturmadan migrate.exe çalıştırarak bir model sınıfı için bir özellik ekleme, bu bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="5803a-154">Adding a property to a model class then running migrate.exe without creating a migration to upgrade the database is an example of this.</span></span> |
| <span data-ttu-id="5803a-155">Hata: Tür için üye çözümlenemedi ' System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, sürüm 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 '.</span><span class="sxs-lookup"><span data-stu-id="5803a-155">ERROR: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</span></span>                                                                                                                                       | <span data-ttu-id="5803a-156">Bu hata yanlış başlangıç dizini belirterek neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="5803a-156">This error can be caused by specifying an incorrect startup directory.</span></span> <span data-ttu-id="5803a-157">Bu migrate.exe konumunu olmalıdır</span><span class="sxs-lookup"><span data-stu-id="5803a-157">This must be the location of migrate.exe</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="5803a-158">İşlenmeyen özel durum: System.NullReferenceException: nesne başvurusu bir nesnenin örneğine ayarlanmadı.</span><span class="sxs-lookup"><span data-stu-id="5803a-158">Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.</span></span> <br/>   <span data-ttu-id="5803a-159">(String [] args) System.Data.Entity.Migrations.Console.Program.Main</span><span class="sxs-lookup"><span data-stu-id="5803a-159">at System.Data.Entity.Migrations.Console.Program.Main(String[] args)</span></span>                                                                                                                                             | <span data-ttu-id="5803a-160">Bu, kullanmakta olduğunuz bir senaryo için gerekli bir parametre belirtmeden kaynaklanabilir.</span><span class="sxs-lookup"><span data-stu-id="5803a-160">This can be caused by not specifying a required parameter for a scenario that you are using.</span></span> <span data-ttu-id="5803a-161">Örneğin bir bağlantı dizesi sağlayıcı adı belirtmeden belirtme.</span><span class="sxs-lookup"><span data-stu-id="5803a-161">For example specifying a connection string without specifying the provider name.</span></span>                                                                                                                        |
| <span data-ttu-id="5803a-162">Hata: birden fazla geçişleri yapılandırma türü 'ClassLibrary1' derlemesinde bulunamadı.</span><span class="sxs-lookup"><span data-stu-id="5803a-162">ERROR: More than one migrations configuration type was found in the assembly 'ClassLibrary1'.</span></span> <span data-ttu-id="5803a-163">Kullanılacak adı belirtin.</span><span class="sxs-lookup"><span data-stu-id="5803a-163">Specify the name of the one to use.</span></span>                                                                                                                                                                                                  | <span data-ttu-id="5803a-164">Hata durumları gibi belirtilen derlemede birden fazla yapılandırma sınıfı yoktur.</span><span class="sxs-lookup"><span data-stu-id="5803a-164">As the error states, there is more than one configuration class in the given assembly.</span></span> <span data-ttu-id="5803a-165">Kullanılacağını belirtmek için /configurationType anahtarını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5803a-165">You must use the /configurationType switch to specify which to use.</span></span>                                                                                                                                           |
| <span data-ttu-id="5803a-166">Hata: dosya veya derleme yüklenemedi '&lt;assemblyName&gt;' veya bağımlılıklarından biri.</span><span class="sxs-lookup"><span data-stu-id="5803a-166">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;’ or one of its dependencies.</span></span> <span data-ttu-id="5803a-167">Verilen derleme adı veya kod temeli geçersizdi.</span><span class="sxs-lookup"><span data-stu-id="5803a-167">The given assembly name or codebase was invalid.</span></span> <span data-ttu-id="5803a-168">(HRESULT özel durum: 0x80131047)</span><span class="sxs-lookup"><span data-stu-id="5803a-168">(Exception from HRESULT: 0x80131047)</span></span>                                                                                                                                                    | <span data-ttu-id="5803a-169">Bu yanlış bir derleme adı belirterek veya olmaması neden olabilir</span><span class="sxs-lookup"><span data-stu-id="5803a-169">This can be caused by specifying an assembly name incorrectly or not having</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="5803a-170">Hata: dosya veya derleme yüklenemedi '&lt;assemblyName&gt;' veya bağımlılıklarından biri.</span><span class="sxs-lookup"><span data-stu-id="5803a-170">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;' or one of its dependencies.</span></span> <span data-ttu-id="5803a-171">Bir programı hatalı biçimde yüklemek için girişimde bulunuldu.</span><span class="sxs-lookup"><span data-stu-id="5803a-171">An attempt was made to load a program with an incorrect format.</span></span>                                                                                                                                                                          | <span data-ttu-id="5803a-172">X x64 karşı migrate.exe çalıştırmayı denediğiniz Bu, uygulama.</span><span class="sxs-lookup"><span data-stu-id="5803a-172">This happens if you are trying to run migrate.exe against an x64 application.</span></span> <span data-ttu-id="5803a-173">EF 5.0 ve aşağıda x86 yalnızca iş olacaktır.</span><span class="sxs-lookup"><span data-stu-id="5803a-173">EF 5.0 and below will only work on x86.</span></span>                                                                                                                                                                                |
