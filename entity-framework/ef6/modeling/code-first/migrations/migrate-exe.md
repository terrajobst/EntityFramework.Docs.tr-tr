---
title: Migrate. exe-EF6 kullanma
author: divega
ms.date: 10/23/2016
ms.assetid: 989ea862-e936-4c85-926a-8cfbef5df5b8
ms.openlocfilehash: 34866ddbbf81f090a064af148a612dd354ae9401
ms.sourcegitcommit: 7a709ce4f77134782393aa802df5ab2718714479
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/04/2019
ms.locfileid: "74824816"
---
# <a name="using-migrateexe"></a><span data-ttu-id="c10b5-102">Migrate. exe kullanma</span><span class="sxs-lookup"><span data-stu-id="c10b5-102">Using migrate.exe</span></span>
<span data-ttu-id="c10b5-103">Code First Migrations, Visual Studio 'nun içinden bir veritabanını güncelleştirmek için kullanılabilir, ancak komut satırı aracı migrate. exe aracılığıyla da çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-103">Code First Migrations can be used to update a database from inside visual studio, but can also be executed via the command line tool migrate.exe.</span></span> <span data-ttu-id="c10b5-104">Bu sayfa, bir veritabanına karşı geçişleri yürütmek için migrate. exe ' yi kullanma hakkında hızlı bir genel bakış sunar.</span><span class="sxs-lookup"><span data-stu-id="c10b5-104">This page will give a quick overview on how to use migrate.exe to execute migrations against a database.</span></span>

> [!NOTE]
> <span data-ttu-id="c10b5-105">Bu makalede temel senaryolarda Code First Migrations kullanmayı bildiğiniz varsayılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-105">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="c10b5-106">Bunu yapmazsanız devam etmeden önce [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) okumanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-106">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="copy-migrateexe"></a><span data-ttu-id="c10b5-107">Copy migrate. exe</span><span class="sxs-lookup"><span data-stu-id="c10b5-107">Copy migrate.exe</span></span>

<span data-ttu-id="c10b5-108">Entity Framework yüklediğinizde, NuGet migrate. exe ' yi kullanarak karşıdan yüklenen paketin araçlar klasörünün içinde olur.</span><span class="sxs-lookup"><span data-stu-id="c10b5-108">When you install Entity Framework using NuGet migrate.exe will be inside the tools folder of the downloaded package.</span></span> <span data-ttu-id="c10b5-109">&lt;proje klasörü&gt;\\paketleri EntityFramework '\\.&lt;sürüm&gt;\\araçları</span><span class="sxs-lookup"><span data-stu-id="c10b5-109">In &lt;project folder&gt;\\packages\\EntityFramework.&lt;version&gt;\\tools</span></span>

<span data-ttu-id="c10b5-110">. Exe dosyasını geçirdikten sonra, geçişlerinizi içeren derlemenin konumuna kopyalamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-110">Once you have migrate.exe then you need to copy it to the location of the assembly that contains your migrations.</span></span>

<span data-ttu-id="c10b5-111">Uygulamanız 4,5 değil .NET 4 ' i hedefliyorsa, **yeniden yönlendirme. config** dosyasını da konuma kopyalamanız ve bunu **migrate. exe. config**olarak yeniden adlandırmanız gerekir. Bu, migrate. exe ' nin Entity Framework derlemesini bulabilmek için doğru bağlama yeniden yönlendirmelerini almasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="c10b5-111">If your application targets .NET 4, and not 4.5, then you will need to copy the **Redirect.config** into the location as well and rename it **migrate.exe.config**. This is so that migrate.exe gets the correct binding redirects to be able to locate the Entity Framework assembly.</span></span>

| <span data-ttu-id="c10b5-112">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="c10b5-112">.NET 4.5</span></span>                                      | <span data-ttu-id="c10b5-113">.NET 4,0</span><span class="sxs-lookup"><span data-stu-id="c10b5-113">.NET 4.0</span></span>                                      |
|:----------------------------------------------|:----------------------------------------------|
| ![.NET 4,5 dosyaları](~/ef6/media/net45files.png) | ![.NET 4,0 dosyaları](~/ef6/media/net40files.png) |

> [!NOTE]
> <span data-ttu-id="c10b5-116">migrate. exe x64 derlemelerini desteklemez.</span><span class="sxs-lookup"><span data-stu-id="c10b5-116">migrate.exe doesn't support x64 assemblies.</span></span>

<span data-ttu-id="c10b5-117">Migrate. exe dosyasını doğru klasöre taşıdıktan sonra veritabanına karşı geçişleri yürütmek için onu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c10b5-117">Once you have moved migrate.exe to the correct folder then you should be able to use it to execute migrations against the database.</span></span> <span data-ttu-id="c10b5-118">Tüm yardımcı programları, geçişleri yürütmek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-118">All the utility is designed to do is execute migrations.</span></span> <span data-ttu-id="c10b5-119">Geçiş oluşturamaz veya bir SQL betiği oluşturamaz.</span><span class="sxs-lookup"><span data-stu-id="c10b5-119">It cannot generate migrations or create a SQL script.</span></span>

## <a name="see-options"></a><span data-ttu-id="c10b5-120">Bkz. Seçenekler</span><span class="sxs-lookup"><span data-stu-id="c10b5-120">See options</span></span>

``` console
Migrate.exe /?
```

<span data-ttu-id="c10b5-121">Yukarıdaki işlem, bu yardımcı program ile ilişkili Yardım sayfasını görüntüler, bu işlemin çalışması için, ' ın migrate. exe ' yi çalıştırmakta olduğunuz konumda EntityFramework. dll ' ye sahip olmanız gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c10b5-121">The above will display the help page associated with this utility, note that you will need to have the EntityFramework.dll in the same location that you are running migrate.exe in order for this to work.</span></span>

## <a name="migrate-to-the-latest-migration"></a><span data-ttu-id="c10b5-122">En son geçişe geçiş</span><span class="sxs-lookup"><span data-stu-id="c10b5-122">Migrate to the latest migration</span></span>

``` console
Migrate.exe MyMvcApplication.dll /startupConfigurationFile="..\\web.config"
```

<span data-ttu-id="c10b5-123">Migrate. exe ' yi çalıştırırken, çalıştırmayı denediğiniz geçişleri içeren derleme olan tek zorunlu parametre, ancak yapılandırma dosyasını belirtmezseniz tüm kural tabanlı ayarları kullanacaktır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-123">When running migrate.exe the only mandatory parameter is the assembly, which is the assembly that contains the migrations that you are trying to run, but it will use all convention based settings if you do not specify the configuration file.</span></span>

## <a name="migrate-to-a-specific-migration"></a><span data-ttu-id="c10b5-124">Belirli bir geçişe geçiş</span><span class="sxs-lookup"><span data-stu-id="c10b5-124">Migrate to a specific migration</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile="MyApp.exe.config" /targetMigration="AddTitle"
```

<span data-ttu-id="c10b5-125">Geçişleri belirli bir geçişe çalıştırmak istiyorsanız, geçişin adını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c10b5-125">If you want to run migrations up to a specific migration, then you can specify the name of the migration.</span></span> <span data-ttu-id="c10b5-126">Bu, belirtilen geçişe gelene kadar tüm önceki geçişleri gereken şekilde çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-126">This will run all previous migrations as required until getting to the migration specified.</span></span>

## <a name="specify-working-directory"></a><span data-ttu-id="c10b5-127">Çalışma dizinini belirtin</span><span class="sxs-lookup"><span data-stu-id="c10b5-127">Specify working directory</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile="MyApp.exe.config" /startupDirectory="c:\\MyApp"
```

<span data-ttu-id="c10b5-128">Derleme bağımlılıkları varsa veya çalışma diziniyle ilişkili dosyaları okuyorsa, startupDirectory 'yi ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-128">If you assembly has dependencies or reads files relative to the working directory then you will need to set startupDirectory.</span></span>

## <a name="specify-migration-configuration-to-use"></a><span data-ttu-id="c10b5-129">Kullanılacak geçiş yapılandırmasını belirtin</span><span class="sxs-lookup"><span data-stu-id="c10b5-129">Specify migration configuration to use</span></span>

``` console
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile="..\\web.config"
```

<span data-ttu-id="c10b5-130">Birden çok geçiş yapılandırma sınıfınız varsa, DbMigrationConfiguration 'dan devralan sınıflar varsa, bu yürütme için kullanılacak olan sınıfları belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-130">If you have multiple migration configuration classes, classes inheriting from DbMigrationConfiguration, then you need to specify which is to be used for this execution.</span></span> <span data-ttu-id="c10b5-131">Bu, yukarıdaki gibi anahtar olmadan isteğe bağlı ikinci parametre sağlanarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-131">This is specified by providing the optional second parameter without a switch as above.</span></span>

## <a name="provide-connection-string"></a><span data-ttu-id="c10b5-132">Bağlantı dizesi sağla</span><span class="sxs-lookup"><span data-stu-id="c10b5-132">Provide connection string</span></span>

``` console
Migrate.exe BlogDemo.dll /connectionString="Data Source=localhost;Initial Catalog=BlogDemo;Integrated Security=SSPI" /connectionProviderName="System.Data.SqlClient"
```

<span data-ttu-id="c10b5-133">Komut satırında bir bağlantı dizesi belirtmek isterseniz, sağlayıcı adını da belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-133">If you wish to specify a connection string at the command line then you must also provide the provider name.</span></span> <span data-ttu-id="c10b5-134">Sağlayıcı adının belirtilmemesine özel bir durum neden olur.</span><span class="sxs-lookup"><span data-stu-id="c10b5-134">Not specifying the provider name will cause an exception.</span></span>

## <a name="common-problems"></a><span data-ttu-id="c10b5-135">Yaygın sorunlar</span><span class="sxs-lookup"><span data-stu-id="c10b5-135">Common Problems</span></span>

| <span data-ttu-id="c10b5-136">Hata İletisi</span><span class="sxs-lookup"><span data-stu-id="c10b5-136">Error Message</span></span>                                                                                                                                                                                                                                                                                                                      | <span data-ttu-id="c10b5-137">Çözüm</span><span class="sxs-lookup"><span data-stu-id="c10b5-137">Solution</span></span>                                                                                                                                                                                                                                                                                             |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c10b5-138">İşlenmeyen özel durum: System. ıO. FileLoadException: dosya veya derleme ' EntityFramework, Version = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 ' veya bağımlılıklarından biri yüklenemedi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-138">Unhandled Exception: System.IO.FileLoadException:  Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="c10b5-139">Konumlandırılan derlemenin bildirim tanımı derleme başvurusuyla eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="c10b5-139">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="c10b5-140">(HRESULT özel durumu: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="c10b5-140">(Exception from HRESULT: 0x80131040)</span></span>         | <span data-ttu-id="c10b5-141">Bu genellikle, Redirect. config dosyası olmadan bir .NET 4 uygulaması çalıştırdığınız anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-141">This typically means that you are running a .NET 4 application without the Redirect.config file.</span></span> <span data-ttu-id="c10b5-142">Redirect. config dosyasını migrate. exe ile aynı konuma kopyalamanız ve. exe. config dosyasını geçirmek için yeniden adlandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-142">You need to copy the Redirect.config to the same location as migrate.exe and rename it to migrate.exe.config.</span></span>                                                                                       |
| <span data-ttu-id="c10b5-143">İşlenmeyen özel durum: System. ıO. FileLoadException: dosya veya derleme ' EntityFramework, Version = 4.4.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 ' veya bağımlılıklarından biri yüklenemedi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-143">Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="c10b5-144">Konumlandırılan derlemenin bildirim tanımı derleme başvurusuyla eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="c10b5-144">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="c10b5-145">(HRESULT özel durumu: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="c10b5-145">(Exception from HRESULT: 0x80131040)</span></span>          | <span data-ttu-id="c10b5-146">Bu özel durum, migrate. exe konumuna kopyaladığınız Redirect. config dosyasına sahip bir .NET 4,5 uygulaması çalıştırdığınız anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-146">This exception means that you are running a .NET 4.5 application with the Redirect.config copied to the migrate.exe location.</span></span> <span data-ttu-id="c10b5-147">Uygulamanız .NET 4,5 ise, içindeki yeniden yönlendirmeleri yapılandırma dosyasına sahip olmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="c10b5-147">If your app is .NET 4.5 then you do not need to have the config file with the redirects inside.</span></span> <span data-ttu-id="c10b5-148">Migrate. exe. config dosyasını silin.</span><span class="sxs-lookup"><span data-stu-id="c10b5-148">Delete the migrate.exe.config file.</span></span>                                    |
| <span data-ttu-id="c10b5-149">Hata: bekleyen değişiklikler olduğu ve otomatik geçiş devre dışı olduğu için veritabanı geçerli modelle eşleşecek şekilde güncelleştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="c10b5-149">ERROR: Unable to update database to match the current model because there are pending changes and automatic migration is disabled.</span></span> <span data-ttu-id="c10b5-150">Bekleyen model değişikliklerini kod tabanlı bir geçişe yazın ya da otomatik geçişi etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="c10b5-150">Either write the pending model changes to a code-based migration or enable automatic migration.</span></span> <span data-ttu-id="c10b5-151">Otomatik geçişi etkinleştirmek için DbMigrationsConfiguration. AutomaticMigrationsEnabled değerini true olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c10b5-151">Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.</span></span> | <span data-ttu-id="c10b5-152">Bu hata, modelde yapılan değişikliklerle buluta bir geçiş oluşturmadıysanız ve veritabanı modeliyle eşleşmediğinden geçiş işlemi çalıştırıldığında oluşur.</span><span class="sxs-lookup"><span data-stu-id="c10b5-152">This error occurs if running migrate when you haven’t created a migration to cope with changes made to the model, and the database does not match the model.</span></span> <span data-ttu-id="c10b5-153">Bir model sınıfına özellik eklemek ve ardından veritabanını yükseltmek için geçiş oluşturmadan migrate. exe ' yi çalıştırmak bunun bir örneğidir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-153">Adding a property to a model class then running migrate.exe without creating a migration to upgrade the database is an example of this.</span></span> |
| <span data-ttu-id="c10b5-154">Hata: ' System. Data. Entity. geçişler. Design. Toolingfaon + UpdateRunner, EntityFramework, Version = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089 ' üyesi için tür çözümlenemedi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-154">ERROR: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</span></span>                                                                                                                                       | <span data-ttu-id="c10b5-155">Hatalı bir başlangıç dizini belirtilerek bu hataya neden olmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-155">This error can be caused by specifying an incorrect startup directory.</span></span> <span data-ttu-id="c10b5-156">Bu, migrate. exe ' nin konumu olmalıdır</span><span class="sxs-lookup"><span data-stu-id="c10b5-156">This must be the location of migrate.exe</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="c10b5-157">İşlenmeyen özel durum: System. NullReferenceException: nesne başvurusu bir nesnenin örneğine ayarlanmadı.</span><span class="sxs-lookup"><span data-stu-id="c10b5-157">Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.</span></span> <br/>   <span data-ttu-id="c10b5-158">System. Data. Entity. geçişler. Console. program. Main (String [] args) konumunda</span><span class="sxs-lookup"><span data-stu-id="c10b5-158">at System.Data.Entity.Migrations.Console.Program.Main(String[] args)</span></span>                                                                                                                                             | <span data-ttu-id="c10b5-159">Bunun nedeni, kullanmakta olduğunuz bir senaryo için gerekli bir parametre belirtmemelidir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-159">This can be caused by not specifying a required parameter for a scenario that you are using.</span></span> <span data-ttu-id="c10b5-160">Örneğin, sağlayıcı adını belirtmeden bir bağlantı dizesi belirtin.</span><span class="sxs-lookup"><span data-stu-id="c10b5-160">For example specifying a connection string without specifying the provider name.</span></span>                                                                                                                        |
| <span data-ttu-id="c10b5-161">Hata: ' ClassLibrary1 ' derlemesinde birden fazla geçiş yapılandırması türü bulundu.</span><span class="sxs-lookup"><span data-stu-id="c10b5-161">ERROR: More than one migrations configuration type was found in the assembly 'ClassLibrary1'.</span></span> <span data-ttu-id="c10b5-162">Kullanılacak birinin adını belirtin.</span><span class="sxs-lookup"><span data-stu-id="c10b5-162">Specify the name of the one to use.</span></span>                                                                                                                                                                                                  | <span data-ttu-id="c10b5-163">Hata durumunda, verilen derlemede birden fazla yapılandırma sınıfı vardır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-163">As the error states, there is more than one configuration class in the given assembly.</span></span> <span data-ttu-id="c10b5-164">Hangisinin kullanılacağını belirtmek için/configurationType anahtarını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-164">You must use the /configurationType switch to specify which to use.</span></span>                                                                                                                                           |
| <span data-ttu-id="c10b5-165">Hata: '&lt;assemblyName&gt;' dosyası veya bütünleştirilmiş kodu ya da bağımlılıklarından biri yüklenemedi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-165">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;’ or one of its dependencies.</span></span> <span data-ttu-id="c10b5-166">Verilen derleme adı veya kod temeli geçersizdi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-166">The given assembly name or codebase was invalid.</span></span> <span data-ttu-id="c10b5-167">(HRESULT özel durumu: 0x80131047)</span><span class="sxs-lookup"><span data-stu-id="c10b5-167">(Exception from HRESULT: 0x80131047)</span></span>                                                                                                                                                    | <span data-ttu-id="c10b5-168">Bunun nedeni, derleme adı yanlış belirtilerek veya olmayan</span><span class="sxs-lookup"><span data-stu-id="c10b5-168">This can be caused by specifying an assembly name incorrectly or not having</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="c10b5-169">Hata: '&lt;assemblyName&gt;' dosyası veya bütünleştirilmiş kodu ya da bağımlılıklarından biri yüklenemedi.</span><span class="sxs-lookup"><span data-stu-id="c10b5-169">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;' or one of its dependencies.</span></span> <span data-ttu-id="c10b5-170">Bir programı hatalı biçimde yükleme girişiminde bulunuldu.</span><span class="sxs-lookup"><span data-stu-id="c10b5-170">An attempt was made to load a program with an incorrect format.</span></span>                                                                                                                                                                          | <span data-ttu-id="c10b5-171">Bu, migrate. exe ' yi bir x64 uygulamasına karşı çalıştırmaya çalışıyorsanız meydana gelir.</span><span class="sxs-lookup"><span data-stu-id="c10b5-171">This happens if you are trying to run migrate.exe against an x64 application.</span></span> <span data-ttu-id="c10b5-172">EF 5,0 ve aşağıdaki, yalnızca x86 üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="c10b5-172">EF 5.0 and below will only work on x86.</span></span>                                                                                                                                                                                |
