---
title: EF Core 2 - EF Core önceki sürümlerinden yükseltme
author: divega
ms.author: divega
ms.date: 8/13/2017
ms.assetid: 8BD43C8C-63D9-4F3A-B954-7BC518A1B7DB
ms.technology: entity-framework-core
uid: core/miscellaneous/1x-2x-upgrade
ms.openlocfilehash: dca9a3fb9e514b6eb22281a0f0140539681efb71
ms.sourcegitcommit: bdd06c9a591ba5e6d6a3ec046c80de98f598f3f3
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/10/2018
ms.locfileid: "37949262"
---
# <a name="upgrading-applications-from-previous-versions-to-ef-core-20"></a><span data-ttu-id="7a414-102">Uygulamaları, EF Core 2.0 için önceki sürümlerinden yükseltme</span><span class="sxs-lookup"><span data-stu-id="7a414-102">Upgrading applications from previous versions to EF Core 2.0</span></span>

## <a name="procedures-common-to-all-applications"></a><span data-ttu-id="7a414-103">Tüm uygulamalar için genel yordamlar</span><span class="sxs-lookup"><span data-stu-id="7a414-103">Procedures Common to All Applications</span></span>

<span data-ttu-id="7a414-104">EF Core 2.0 için mevcut bir uygulamayı güncelleştirme gerektirebilir:</span><span class="sxs-lookup"><span data-stu-id="7a414-104">Updating an existing application to EF Core 2.0 may require:</span></span>

1. <span data-ttu-id="7a414-105">.NET Standard 2.0 destekleyen bir uygulamanın hedef .NET platformu yükseltiliyor.</span><span class="sxs-lookup"><span data-stu-id="7a414-105">Upgrading the target .NET platform of the application to one that supports .NET Standard 2.0.</span></span> <span data-ttu-id="7a414-106">Bkz: [desteklenen platformlar](../platforms/index.md) daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="7a414-106">See [Supported Platforms](../platforms/index.md) for more details.</span></span>

2. <span data-ttu-id="7a414-107">EF Core 2.0 ile uyumlu olan hedef veritabanı için bir sağlayıcı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="7a414-107">Identify a provider for the target database which is compatible with EF Core 2.0.</span></span> <span data-ttu-id="7a414-108">Bkz: [EF Core 2.0 gerektirir 2.0 veritabanı sağlayıcısı](#ef-core-20-requires-a-20-database-provider) aşağıda.</span><span class="sxs-lookup"><span data-stu-id="7a414-108">See [EF Core 2.0 requires a 2.0 database provider](#ef-core-20-requires-a-20-database-provider) below.</span></span>

3. <span data-ttu-id="7a414-109">Tüm EF Core paketleri (çalışma zamanı ve araç) 2.0 için yükseltiliyor.</span><span class="sxs-lookup"><span data-stu-id="7a414-109">Upgrading all the EF Core packages (runtime and tooling) to 2.0.</span></span> <span data-ttu-id="7a414-110">Başvurmak [yükleme EF Core](../get-started/install/index.md) daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="7a414-110">Refer to [Installing EF Core](../get-started/install/index.md) for more details.</span></span>

4. <span data-ttu-id="7a414-111">Önemli değişiklikler için dengelemek için gereken kod değişikliklerini yapın.</span><span class="sxs-lookup"><span data-stu-id="7a414-111">Make any necessary code changes to compensate for breaking changes.</span></span> <span data-ttu-id="7a414-112">Bkz: [bozucu değişiklikleri](#breaking-changes) bölümünde daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="7a414-112">See the [Breaking Changes](#breaking-changes) section below for more details.</span></span>

## <a name="aspnet-core-applications"></a><span data-ttu-id="7a414-113">ASP.NET Core uygulamaları</span><span class="sxs-lookup"><span data-stu-id="7a414-113">ASP.NET Core applications</span></span>

1. <span data-ttu-id="7a414-114">Özellikle bkz [uygulamanın hizmet sağlayıcısı başlatılırken yeni Düzen](#new-way-of-getting-application-services) aşağıda açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="7a414-114">See in particular the [new pattern for initializing the application's service provider](#new-way-of-getting-application-services) described below.</span></span>

> [!TIP]  
> <span data-ttu-id="7a414-115">2.0 uygulamaları güncelleştirme önemle tavsiye edilir ve çalışılabilmesi Entity Framework Code Migrations gibi ürün özellikleri için gerekli olan bu yeni düzen benimsenmesini.</span><span class="sxs-lookup"><span data-stu-id="7a414-115">The adoption of this new pattern when updating applications to 2.0 is highly recommended and is required in order for product features like Entity Framework Core Migrations to work.</span></span> <span data-ttu-id="7a414-116">Yaygın bir alternatif [uygulamak *IDesignTimeDbContextFactory\<TContext >*](xref:core/miscellaneous/cli/dbcontext-creation#from-a-design-time-factory).</span><span class="sxs-lookup"><span data-stu-id="7a414-116">The other common alternative is to [implement *IDesignTimeDbContextFactory\<TContext>*](xref:core/miscellaneous/cli/dbcontext-creation#from-a-design-time-factory).</span></span>

2. <span data-ttu-id="7a414-117">ASP.NET Core 2.0 hedefleyen uygulamalar, üçüncü taraf veritabanı sağlayıcıları yanı sıra ek bağımlılıkları olmadan EF Core 2.0 kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a414-117">Applications targeting ASP.NET Core 2.0 can use EF Core 2.0 without additional dependencies besides third party database providers.</span></span> <span data-ttu-id="7a414-118">Ancak, ASP.NET Core'nın önceki sürümlerini hedefleyen uygulamalar EF Core 2.0 kullanmak için ASP.NET Core 2. 0'ı yükseltmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7a414-118">However, applications targeting previous versions of ASP.NET Core need to upgrade to ASP.NET Core 2.0 in order to use EF Core 2.0.</span></span> <span data-ttu-id="7a414-119">ASP.NET Core 2.0 uygulamaları yükseltme hakkında daha fazla ayrıntı görmek için [konu üzerinde ASP.NET Core belgeleri](https://docs.microsoft.com/aspnet/core/migration/1x-to-2x/).</span><span class="sxs-lookup"><span data-stu-id="7a414-119">For more details on upgrading ASP.NET Core applications to 2.0 see [the ASP.NET Core documentation on the subject](https://docs.microsoft.com/aspnet/core/migration/1x-to-2x/).</span></span>

## <a name="breaking-changes"></a><span data-ttu-id="7a414-120">Yeni Değişiklikler</span><span class="sxs-lookup"><span data-stu-id="7a414-120">Breaking Changes</span></span>

<span data-ttu-id="7a414-121">Biz, önemli ölçüde bizim mevcut API'lere ve 2.0 davranışlarını iyileştirmek için Fırsat yönlendirdik.</span><span class="sxs-lookup"><span data-stu-id="7a414-121">We have taken the opportunity to significantly refine our existing APIs and behaviors in 2.0.</span></span> <span data-ttu-id="7a414-122">Uygulamaların çoğu için inanıyoruz, ancak etkileri düşük yeniden derleme ve eski API'ler değiştirilecek destekli küçük değişiklikler gerektiren çoğu durumda, mevcut uygulama kodunun değiştirilmesi gereken birkaç geliştirmeleri vardır.</span><span class="sxs-lookup"><span data-stu-id="7a414-122">There are a few improvements that can require modifying existing application code, although we believe that for the majority of applications the impact will be low, in most cases requiring just recompilation and minimal guided changes to replace obsolete APIs.</span></span>

### <a name="new-way-of-getting-application-services"></a><span data-ttu-id="7a414-123">Uygulama Hizmetleri yeni yöntemi</span><span class="sxs-lookup"><span data-stu-id="7a414-123">New way of getting application services</span></span>

<span data-ttu-id="7a414-124">ASP.NET Core web uygulamaları için önerilen Düzen 2.0 EF Core 1.x içinde kullanılan tasarım zamanı mantığını kesildi şekilde güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="7a414-124">The recommended pattern for ASP.NET Core web applications has been updated for 2.0 in a way that broke the design-time logic EF Core used in 1.x.</span></span> <span data-ttu-id="7a414-125">Tasarım zamanında, çağırmak daha önce EF Core isteriz `Startup.ConfigureServices` doğrudan uygulamanın hizmet sağlayıcısı erişebilmek için.</span><span class="sxs-lookup"><span data-stu-id="7a414-125">Previously at design-time, EF Core would try to invoke `Startup.ConfigureServices` directly in order to access the application's service provider.</span></span> <span data-ttu-id="7a414-126">ASP.NET Core 2.0 sürümünde, yapılandırma dışında başlatılır `Startup` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="7a414-126">In ASP.NET Core 2.0, Configuration is initialized outside of the `Startup` class.</span></span> <span data-ttu-id="7a414-127">EF Core genellikle kullanan uygulamalar, bağlantı dizesi bu nedenle yapılandırmasından erişim `Startup` kendisi tarafından artık yeterli değil.</span><span class="sxs-lookup"><span data-stu-id="7a414-127">Applications using EF Core typically access their connection string from Configuration, so `Startup` by itself is no longer sufficient.</span></span> <span data-ttu-id="7a414-128">Bir ASP.NET Core 1.x uygulaması yükseltirseniz, EF Core araçlarını kullanırken aşağıdaki hatayı alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a414-128">If you upgrade an ASP.NET Core 1.x application, you may receive the following error when using the EF Core tools.</span></span>

> <span data-ttu-id="7a414-129">Parametresiz bir Oluşturucusu 'ApplicationContext' üzerinde bulunamadı.</span><span class="sxs-lookup"><span data-stu-id="7a414-129">No parameterless constructor was found on 'ApplicationContext'.</span></span> <span data-ttu-id="7a414-130">Uygulaması ekleyin veya parametresiz bir Oluşturucu 'ApplicationContext için' Ekle ' IDesignTimeDbContextFactory&lt;ApplicationContext&gt;' aynı bütünleştirilmiş kodun 'ApplicationContext' olarak</span><span class="sxs-lookup"><span data-stu-id="7a414-130">Either add a parameterless constructor to 'ApplicationContext' or add an implementation of 'IDesignTimeDbContextFactory&lt;ApplicationContext&gt;' in the same assembly as 'ApplicationContext'</span></span>

<span data-ttu-id="7a414-131">ASP.NET Core 2.0'ın varsayılan şablonda yeni bir tasarım zamanı kanca eklendi.</span><span class="sxs-lookup"><span data-stu-id="7a414-131">A new design-time hook has been added in ASP.NET Core 2.0's default template.</span></span> <span data-ttu-id="7a414-132">Statik `Program.BuildWebHost` EF Core, tasarım zamanında uygulamanın hizmet sağlayıcısına erişmek yöntemi etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="7a414-132">The static `Program.BuildWebHost` method enables EF Core to access the application's service provider at design time.</span></span> <span data-ttu-id="7a414-133">Bir ASP.NET Core 1.x uygulaması yükseltiyorsanız, güncelleştirmeniz gerekecektir `Program` aşağıdakine benzeyecek şekilde sınıfı.</span><span class="sxs-lookup"><span data-stu-id="7a414-133">If you are upgrading an ASP.NET Core 1.x application, you will need to update you `Program` class to resemble the following.</span></span>

``` csharp
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Hosting;

namespace AspNetCoreDotNetCore2._0App
{
    public class Program
    {
        public static void Main(string[] args)
        {
            BuildWebHost(args).Run();
        }

        public static IWebHost BuildWebHost(string[] args) =>
            WebHost.CreateDefaultBuilder(args)
                .UseStartup<Startup>()
                .Build();
    }
}
```

### <a name="idbcontextfactory-renamed"></a><span data-ttu-id="7a414-134">IDbContextFactory yeniden adlandırıldı</span><span class="sxs-lookup"><span data-stu-id="7a414-134">IDbContextFactory renamed</span></span>

<span data-ttu-id="7a414-135">Farklı uygulama kullanım düzenini ve kullanıcıların nasıl üzerinde daha fazla denetim sağlamak için bunların `DbContext` kullanılan tasarım zamanında, geçmişte, sağlanan sahibiz `IDbContextFactory<TContext>` arabirimi.</span><span class="sxs-lookup"><span data-stu-id="7a414-135">In order to support diverse application patterns and give users more control over how their `DbContext` is used at design time, we have, in the past, provided the `IDbContextFactory<TContext>` interface.</span></span> <span data-ttu-id="7a414-136">Tasarım zamanında, EF Core araçları, projenizdeki bu arabirimin uygulamaları bulmak ve oluşturmak için bunu kullanın `DbContext` nesneleri.</span><span class="sxs-lookup"><span data-stu-id="7a414-136">At design-time, the EF Core tools will discover implementations of this interface in your project and use it to create `DbContext` objects.</span></span>

<span data-ttu-id="7a414-137">Bu arabirim, bazı kullanıcılar için başka bir yeniden kullanmayı deneyin yanıltmaya çok genel bir ad olduğu `DbContext`-senaryolar oluşturma.</span><span class="sxs-lookup"><span data-stu-id="7a414-137">This interface had a very general name which mislead some users to try re-using it for other `DbContext`-creating scenarios.</span></span> <span data-ttu-id="7a414-138">Tasarım zamanında, geliştirdikleri kullanılacak EF araçları ardından çalıştığında guard'ı yakalandı ve komutlar gibi neden `Update-Database` veya `dotnet ef database update` başarısız.</span><span class="sxs-lookup"><span data-stu-id="7a414-138">They were caught off guard when the EF Tools then tried to use their implementation at design-time and caused commands like `Update-Database` or `dotnet ef database update` to fail.</span></span>

<span data-ttu-id="7a414-139">Bu arabirim güçlü tasarım zamanı semantiği iletişim kurmak için biz olarak yeniden adlandırıldı `IDesignTimeDbContextFactory<TContext>`.</span><span class="sxs-lookup"><span data-stu-id="7a414-139">In order to communicate the strong design-time semantics of this interface, we have renamed it to `IDesignTimeDbContextFactory<TContext>`.</span></span>

<span data-ttu-id="7a414-140">2.0 sürüm `IDbContextFactory<TContext>` hala var, ancak eski olarak işaretlendi.</span><span class="sxs-lookup"><span data-stu-id="7a414-140">For the 2.0 release the `IDbContextFactory<TContext>` still exists but is marked as obsolete.</span></span>

### <a name="dbcontextfactoryoptions-removed"></a><span data-ttu-id="7a414-141">DbContextFactoryOptions kaldırıldı</span><span class="sxs-lookup"><span data-stu-id="7a414-141">DbContextFactoryOptions removed</span></span>

<span data-ttu-id="7a414-142">Yukarıda açıklanan ASP.NET Core 2.0 değişiklikler nedeniyle, bulduk `DbContextFactoryOptions` artık yeni gerekti `IDesignTimeDbContextFactory<TContext>` arabirimi.</span><span class="sxs-lookup"><span data-stu-id="7a414-142">Because of the ASP.NET Core 2.0 changes described above, we found that `DbContextFactoryOptions` was no longer needed on the new `IDesignTimeDbContextFactory<TContext>` interface.</span></span> <span data-ttu-id="7a414-143">Bunun yerine kullanarak seçenekleri aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7a414-143">Here are the alternatives you should be using instead.</span></span>

| <span data-ttu-id="7a414-144">DbContextFactoryOptions</span><span class="sxs-lookup"><span data-stu-id="7a414-144">DbContextFactoryOptions</span></span> | <span data-ttu-id="7a414-145">Alternatif</span><span class="sxs-lookup"><span data-stu-id="7a414-145">Alternative</span></span>                                                  |
|:------------------------|:-------------------------------------------------------------|
| <span data-ttu-id="7a414-146">ApplicationBasePath</span><span class="sxs-lookup"><span data-stu-id="7a414-146">ApplicationBasePath</span></span>     | <span data-ttu-id="7a414-147">AppContext.BaseDirectory</span><span class="sxs-lookup"><span data-stu-id="7a414-147">AppContext.BaseDirectory</span></span>                                     |
| <span data-ttu-id="7a414-148">ContentRootPath</span><span class="sxs-lookup"><span data-stu-id="7a414-148">ContentRootPath</span></span>         | <span data-ttu-id="7a414-149">Directory.GetCurrentDirectory()</span><span class="sxs-lookup"><span data-stu-id="7a414-149">Directory.GetCurrentDirectory()</span></span>                              |
| <span data-ttu-id="7a414-150">EnvironmentName</span><span class="sxs-lookup"><span data-stu-id="7a414-150">EnvironmentName</span></span>         | <span data-ttu-id="7a414-151">Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT")</span><span class="sxs-lookup"><span data-stu-id="7a414-151">Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT")</span></span> |

### <a name="design-time-working-directory-changed"></a><span data-ttu-id="7a414-152">Tasarım zamanı çalışma dizini değiştirildi</span><span class="sxs-lookup"><span data-stu-id="7a414-152">Design-time working directory changed</span></span>

<span data-ttu-id="7a414-153">ASP.NET Core 2.0 değişiklikleri de kullandığı çalışma dizinini gerekli `dotnet ef` uygulamanız çalışırken Visual Studio tarafından kullanılan çalışma dizini ile hizalamak için.</span><span class="sxs-lookup"><span data-stu-id="7a414-153">The ASP.NET Core 2.0 changes also required the working directory used by `dotnet ef` to align with the working directory used by Visual Studio when running your application.</span></span> <span data-ttu-id="7a414-154">Bu gözlemlenebilir bir yan etkisi olması için kullandıkları gibi dosya adları şimdi proje dizinine ve çıkış dizini göreli olan bu SQLite ' dir.</span><span class="sxs-lookup"><span data-stu-id="7a414-154">One observable side effect of this is that SQLite filenames are now relative to the project directory and not the output directory like they used to be.</span></span>

### <a name="ef-core-20-requires-a-20-database-provider"></a><span data-ttu-id="7a414-155">EF Core 2.0 2.0 veritabanı sağlayıcısı gerektirir</span><span class="sxs-lookup"><span data-stu-id="7a414-155">EF Core 2.0 requires a 2.0 database provider</span></span>

<span data-ttu-id="7a414-156">EF Core 2.0 için birçok basitleştirme ve çalışma biçimini veritabanı sağlayıcıları geliştirmeleri yaptık.</span><span class="sxs-lookup"><span data-stu-id="7a414-156">For EF Core 2.0 we have made many simplifications and improvements in the way database providers work.</span></span> <span data-ttu-id="7a414-157">Başka bir deyişle, 1.0.x kullanılır ve 1.1.x sağlayıcıları EF Core 2.0 ile çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="7a414-157">This means that 1.0.x and 1.1.x providers will not work with EF Core 2.0.</span></span>

<span data-ttu-id="7a414-158">SQL Server ve SQLite sağlayıcıları EF ekibi tarafından sağlanan ve 2.0 sürümlerinde kullanılabilir 2.0 bir parçası olarak bırakın.</span><span class="sxs-lookup"><span data-stu-id="7a414-158">The SQL Server and SQLite providers are shipped by the EF team and 2.0 versions will be available as part of the 2.0 release.</span></span> <span data-ttu-id="7a414-159">Açık kaynak üçüncü taraf sağlayıcılar için [SQL Compact](https://github.com/ErikEJ/EntityFramework.SqlServerCompact), [PostgreSQL](https://github.com/npgsql/Npgsql.EntityFrameworkCore.PostgreSQL), ve [MySQL](https://github.com/PomeloFoundation/Pomelo.EntityFrameworkCore.MySql) 2.0 için güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7a414-159">The open-source third party providers for [SQL Compact](https://github.com/ErikEJ/EntityFramework.SqlServerCompact), [PostgreSQL](https://github.com/npgsql/Npgsql.EntityFrameworkCore.PostgreSQL), and [MySQL](https://github.com/PomeloFoundation/Pomelo.EntityFrameworkCore.MySql) are being updated for 2.0.</span></span> <span data-ttu-id="7a414-160">Diğer tüm sağlayıcıları için sağlayıcı Yazar temasa geçin.</span><span class="sxs-lookup"><span data-stu-id="7a414-160">For all other providers, please contact the provider writer.</span></span>

### <a name="logging-and-diagnostics-events-have-changed"></a><span data-ttu-id="7a414-161">Günlüğe kaydetme ve tanılama olayları değiştirildi</span><span class="sxs-lookup"><span data-stu-id="7a414-161">Logging and Diagnostics events have changed</span></span>

<span data-ttu-id="7a414-162">Not: Bu değişikliklerin çoğu uygulama kodu etkilememesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7a414-162">Note: these changes should not impact most application code.</span></span>

<span data-ttu-id="7a414-163">' % S'olay kimlikleri için gönderilen iletiler için bir [ILogger](https://github.com/aspnet/Logging/blob/dev/src/Microsoft.Extensions.Logging.Abstractions/ILogger.cs) 2.0 sürümünde değiştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7a414-163">The event IDs for messages sent to an [ILogger](https://github.com/aspnet/Logging/blob/dev/src/Microsoft.Extensions.Logging.Abstractions/ILogger.cs) have changed in 2.0.</span></span> <span data-ttu-id="7a414-164">Olay kimlikleri, artık EF Core kod arasında benzersizdir.</span><span class="sxs-lookup"><span data-stu-id="7a414-164">The event IDs are now unique across EF Core code.</span></span> <span data-ttu-id="7a414-165">Bu iletiler şimdi de, örneğin, MVC kullanılan yapılandırılmış günlük kaydı için standart deseni izleyin.</span><span class="sxs-lookup"><span data-stu-id="7a414-165">These messages now also follow the standard pattern for structured logging used by, for example, MVC.</span></span>

<span data-ttu-id="7a414-166">Günlükçü kategoriler de değiştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7a414-166">Logger categories have also changed.</span></span> <span data-ttu-id="7a414-167">İyi bilinen bir kategori kümesini aracılığıyla erişilen artık yoktur [DbLoggerCategory](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/DbLoggerCategory.cs).</span><span class="sxs-lookup"><span data-stu-id="7a414-167">There is now a well-known set of categories accessed through [DbLoggerCategory](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/DbLoggerCategory.cs).</span></span>

<span data-ttu-id="7a414-168">[DiagnosticSource](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/DiagnosticSourceUsersGuide.md) olayları artık ilgili olarak aynı olay kimliği adları kullanma `ILogger` iletileri.</span><span class="sxs-lookup"><span data-stu-id="7a414-168">[DiagnosticSource](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/DiagnosticSourceUsersGuide.md) events now use the same event ID names as the corresponding `ILogger` messages.</span></span> <span data-ttu-id="7a414-169">Olay yükü türetilen tüm nominal türleridir [EventData](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Diagnostics/EventData.cs).</span><span class="sxs-lookup"><span data-stu-id="7a414-169">The event payloads are all nominal types derived from [EventData](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Diagnostics/EventData.cs).</span></span>

<span data-ttu-id="7a414-170">Olay kimlikleri, yükü türleri ve kategorileri bölümünde belgelenmiştir [CoreEventId](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Diagnostics/CoreEventId.cs) ve [RelationalEventId](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore.Relational/Diagnostics/RelationalEventId.cs) sınıfları.</span><span class="sxs-lookup"><span data-stu-id="7a414-170">Event IDs, payload types, and categories are documented in the [CoreEventId](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Diagnostics/CoreEventId.cs) and the [RelationalEventId](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore.Relational/Diagnostics/RelationalEventId.cs) classes.</span></span>

<span data-ttu-id="7a414-171">Kimlikleri, ayrıca yeni Microsoft.EntityFrameworkCore.Diagnostics ad alanına Microsoft.EntityFrameworkCore.Infraestructure taşındı.</span><span class="sxs-lookup"><span data-stu-id="7a414-171">IDs have also moved from Microsoft.EntityFrameworkCore.Infraestructure to the new Microsoft.EntityFrameworkCore.Diagnostics namespace.</span></span>

### <a name="ef-core-relational-metadata-api-changes"></a><span data-ttu-id="7a414-172">EF Core ilişkisel meta veri API'si değişiklikleri</span><span class="sxs-lookup"><span data-stu-id="7a414-172">EF Core relational metadata API changes</span></span>

<span data-ttu-id="7a414-173">EF Core 2.0 artık farklı bir derler [IModel](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IModel.cs) için kullanılan her farklı bir sağlayıcı.</span><span class="sxs-lookup"><span data-stu-id="7a414-173">EF Core 2.0 will now build a different [IModel](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IModel.cs) for each different provider being used.</span></span> <span data-ttu-id="7a414-174">Bu genellikle uygulamaya saydamdır.</span><span class="sxs-lookup"><span data-stu-id="7a414-174">This is usually transparent to the application.</span></span> <span data-ttu-id="7a414-175">Tüm erişimi olacak şekilde bu düşük düzeyli meta verileri API'leri bir basitleştirme kolaylaştırılan _ortak ilişkisel meta veri kavramlarını_ her zaman bir çağrı yoluyla yapılan `.Relational` yerine `.SqlServer`, `.Sqlite`, vb. Örneğin, 1.1.x kodu şöyle:</span><span class="sxs-lookup"><span data-stu-id="7a414-175">This has facilitated a simplification of lower-level metadata APIs such that any access to _common relational metadata concepts_ is always made through a call to `.Relational` instead of `.SqlServer`, `.Sqlite`, etc. For example, 1.1.x code like this:</span></span>

``` csharp
var tableName = context.Model.FindEntityType(typeof(User)).SqlServer().TableName;
```

<span data-ttu-id="7a414-176">Artık şu şekilde yazılmalıdır:</span><span class="sxs-lookup"><span data-stu-id="7a414-176">Should now be written like this:</span></span>

``` csharp
var tableName = context.Model.FindEntityType(typeof(User)).Relational().TableName;
```

<span data-ttu-id="7a414-177">Gibi yöntemleri kullanmak yerine `ForSqlServerToTable`, genişletme yöntemleri geçerli sağlayıcı kullanımda göre koşullu kodu yazmak kullanılabilen şimdi.</span><span class="sxs-lookup"><span data-stu-id="7a414-177">Instead of using methods like `ForSqlServerToTable`, extension methods are now available to write conditional code based on the current provider in use.</span></span> <span data-ttu-id="7a414-178">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="7a414-178">For example:</span></span>

```C#
modelBuilder.Entity<User>().ToTable(
    Database.IsSqlServer() ? "SqlServerName" : "OtherName");
```

<span data-ttu-id="7a414-179">Bu değişiklik yalnızca tanımlanmış API'ler/meta geçerlidir Not _tüm_ ilişkisel sağlayıcıları.</span><span class="sxs-lookup"><span data-stu-id="7a414-179">Note that this change only applies to APIs/metadata that is defined for _all_ relational providers.</span></span> <span data-ttu-id="7a414-180">API ve meta verileri aynı kalır, yalnızca tek bir sağlayıcıya özel olduğunda.</span><span class="sxs-lookup"><span data-stu-id="7a414-180">The API and metadata remains the same when it is specific to only a single provider.</span></span> <span data-ttu-id="7a414-181">Örneğin, SQL Server için belirli Kümelenmiş dizinler için `ForSqlServerIsClustered` ve `.SqlServer().IsClustered()` yine de kullanılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7a414-181">For example, clustered indexes are specific to SQL Sever, so `ForSqlServerIsClustered` and  `.SqlServer().IsClustered()` must still be used.</span></span>

### <a name="dont-take-control-of-the-ef-service-provider"></a><span data-ttu-id="7a414-182">EF hizmet sağlayıcısı'nın denetimini ele geçirmesine yok</span><span class="sxs-lookup"><span data-stu-id="7a414-182">Don’t take control of the EF service provider</span></span>

<span data-ttu-id="7a414-183">EF Core kullanan bir iç `IServiceProvider` (bir bağımlılık ekleme kapsayıcısını) için kendi iç uygulama.</span><span class="sxs-lookup"><span data-stu-id="7a414-183">EF Core uses an internal `IServiceProvider` (a dependency injection container) for its internal implementation.</span></span> <span data-ttu-id="7a414-184">Uygulamaları oluşturmak ve özel durumlar dışında bu sağlayıcıyı yönetmek EF Core izin vermelidir.</span><span class="sxs-lookup"><span data-stu-id="7a414-184">Applications should allow EF Core to create and manage this provider except in special cases.</span></span> <span data-ttu-id="7a414-185">Çağrıları kaldırma kesin düşünün `UseInternalServiceProvider`.</span><span class="sxs-lookup"><span data-stu-id="7a414-185">Strongly consider removing any calls to `UseInternalServiceProvider`.</span></span> <span data-ttu-id="7a414-186">Bir uygulama çağırmak gerekli olmaması halinde `UseInternalServiceProvider`, lütfen göz önünde bulundurun [soruna dosyalama](https://github.com/aspnet/EntityFramework/Issues) biz senaryonuz işlemek için kullanabileceğiniz diğer yöntemler araştırabileceği şekilde.</span><span class="sxs-lookup"><span data-stu-id="7a414-186">If an application does need to call `UseInternalServiceProvider`, then please consider [filing an issue](https://github.com/aspnet/EntityFramework/Issues) so we can investigate other ways to handle your scenario.</span></span>

<span data-ttu-id="7a414-187">Çağırma `AddEntityFramework`, `AddEntityFrameworkSqlServer`, vb. gerekli değildir uygulama kodu tarafından sürece `UseInternalServiceProvider` olarak da adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="7a414-187">Calling `AddEntityFramework`, `AddEntityFrameworkSqlServer`, etc. is not required by application code unless `UseInternalServiceProvider` is also called.</span></span> <span data-ttu-id="7a414-188">Mevcut tüm çağrıları kaldırın `AddEntityFramework` veya `AddEntityFrameworkSqlServer`, vs. `AddDbContext` yine de aynı şekilde önceki gibi kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7a414-188">Remove any existing calls to `AddEntityFramework` or `AddEntityFrameworkSqlServer`, etc. `AddDbContext` should still be used in the same way as before.</span></span>

### <a name="in-memory-databases-must-be-named"></a><span data-ttu-id="7a414-189">Bellek içi veritabanı olarak adlandırılmalıdır</span><span class="sxs-lookup"><span data-stu-id="7a414-189">In-memory databases must be named</span></span>

<span data-ttu-id="7a414-190">Genel adlandırılmamış bellek içi veritabanı kaldırıldı ve bunun yerine tüm bellek içi veritabanı olarak adlandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7a414-190">The global unnamed in-memory database has been removed and instead all in-memory databases must be named.</span></span> <span data-ttu-id="7a414-191">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="7a414-191">For example:</span></span>

``` csharp
optionsBuilder.UseInMemoryDatabase("MyDatabase");
```

<span data-ttu-id="7a414-192">Bu oluşturur / "Veritabanım" adlı bir veritabanı kullanır.</span><span class="sxs-lookup"><span data-stu-id="7a414-192">This creates/uses a database with the name “MyDatabase”.</span></span> <span data-ttu-id="7a414-193">Varsa `UseInMemoryDatabase` aynı ada sahip birden fazla bağlam örneği tarafından paylaşılmasına izin vererek aynı bellek içi veritabanı kullanılır yeniden adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="7a414-193">If `UseInMemoryDatabase` is called again with the same name, then the same in-memory database will be used, allowing it to be shared by multiple context instances.</span></span>

### <a name="read-only-api-changes"></a><span data-ttu-id="7a414-194">Salt okunur API'SİNDEKİ değişiklikler</span><span class="sxs-lookup"><span data-stu-id="7a414-194">Read-only API changes</span></span>

<span data-ttu-id="7a414-195">`IsReadOnlyBeforeSave`, `IsReadOnlyAferSave`, ve `IsStoreGeneratedAlways` geçersiz kılınmış ve yerine [BeforeSaveBehavior](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IProperty.cs#L39) ve [AfterSaveBehavior](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IProperty.cs#L55).</span><span class="sxs-lookup"><span data-stu-id="7a414-195">`IsReadOnlyBeforeSave`, `IsReadOnlyAferSave`, and `IsStoreGeneratedAlways` have been obsoleted and replaced with [BeforeSaveBehavior](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IProperty.cs#L39) and [AfterSaveBehavior](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/IProperty.cs#L55).</span></span> <span data-ttu-id="7a414-196">Bu davranışların herhangi bir özelliği (yalnızca depoda üretilmiş Özellikler) uygulayın ve özelliğinin değeri bir veritabanı satır ekleme yaparken nasıl kullanılması gerektiği belirlemek (`BeforeSaveBehavior`) veya ne zaman mevcut bir veritabanı güncelleniyor satır (`AfterSaveBehavior`).</span><span class="sxs-lookup"><span data-stu-id="7a414-196">These behaviors apply to any property (not only store-generated properties) and determine how the value of the property should be used when inserting into a database row (`BeforeSaveBehavior`) or when updating an existing database row (`AfterSaveBehavior`).</span></span>

<span data-ttu-id="7a414-197">Özellikler olarak işaretlenmiş [ValueGenerated.OnAddOrUpdate](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/ValueGenerated.cs) (örneğin, hesaplanan sütunlar) özelliği ayarlanmış herhangi bir değeri varsayılan olarak göz ardı eder.</span><span class="sxs-lookup"><span data-stu-id="7a414-197">Properties marked as [ValueGenerated.OnAddOrUpdate](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/ValueGenerated.cs) (for example, for computed columns) will by default ignore any value currently set on the property.</span></span> <span data-ttu-id="7a414-198">Bu depoda üretilmiş bir değer olup herhangi bir değere ayarlayın veya bırakıldığı izlenen varlık üzerinde değişiklik bakılmaksızın her zaman alınacaktır anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="7a414-198">This means that a store-generated value will always be obtained regardless of whether any value has been set or modified on the tracked entity.</span></span> <span data-ttu-id="7a414-199">Bu farklı bir ayarlayarak değiştirilebilir `Before\AfterSaveBehavior`.</span><span class="sxs-lookup"><span data-stu-id="7a414-199">This can be changed by setting a different `Before\AfterSaveBehavior`.</span></span>

### <a name="new-clientsetnull-delete-behavior"></a><span data-ttu-id="7a414-200">Yeni ClientSetNull silme davranışı</span><span class="sxs-lookup"><span data-stu-id="7a414-200">New ClientSetNull delete behavior</span></span>

<span data-ttu-id="7a414-201">Önceki sürümlerde, [DeleteBehavior.Restrict](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/DeleteBehavior.cs) sahip varlıklar için bir davranış izlenen bağlam tarafından daha fazla eşleşen kapalı `SetNull` semantiği.</span><span class="sxs-lookup"><span data-stu-id="7a414-201">In previous releases, [DeleteBehavior.Restrict](https://github.com/aspnet/EntityFramework/blob/dev/src/EFCore/Metadata/DeleteBehavior.cs) had a behavior for entities tracked by the context that more closed matched `SetNull` semantics.</span></span> <span data-ttu-id="7a414-202">EF Core 2.0, yeni bir `ClientSetNull` davranışı, isteğe bağlı bir ilişki için varsayılan olarak sunulmuş.</span><span class="sxs-lookup"><span data-stu-id="7a414-202">In EF Core 2.0, a new `ClientSetNull` behavior has been introduced as the default for optional relationships.</span></span> <span data-ttu-id="7a414-203">Bu davranışı `SetNull` izlenen varlık semantiği ve `Restrict` EF Core kullanılarak oluşturulan veritabanları için davranış.</span><span class="sxs-lookup"><span data-stu-id="7a414-203">This behavior has `SetNull` semantics for tracked entities and `Restrict` behavior for databases created using EF Core.</span></span> <span data-ttu-id="7a414-204">Deneyimimizde, bu izlenen varlıkları ve veritabanı için beklenen/faydalı davranışları vardır.</span><span class="sxs-lookup"><span data-stu-id="7a414-204">In our experience, these are the most expected/useful behaviors for tracked entities and the database.</span></span> <span data-ttu-id="7a414-205">`DeleteBehavior.Restrict` Şimdi isteğe bağlı ilişki için ayarlandığında izlenen varlıklar için uygulanır.</span><span class="sxs-lookup"><span data-stu-id="7a414-205">`DeleteBehavior.Restrict` is now honored for tracked entities when set for optional relationships.</span></span>

### <a name="provider-design-time-packages-removed"></a><span data-ttu-id="7a414-206">Sağlayıcı tasarım zamanı paketleri kaldırıldı</span><span class="sxs-lookup"><span data-stu-id="7a414-206">Provider design-time packages removed</span></span>

<span data-ttu-id="7a414-207">`Microsoft.EntityFrameworkCore.Relational.Design` Paket kaldırıldı.</span><span class="sxs-lookup"><span data-stu-id="7a414-207">The `Microsoft.EntityFrameworkCore.Relational.Design` package has been removed.</span></span> <span data-ttu-id="7a414-208">İçeriğiyle birleştirilmiş içine `Microsoft.EntityFrameworkCore.Relational` ve `Microsoft.EntityFrameworkCore.Design`.</span><span class="sxs-lookup"><span data-stu-id="7a414-208">It's contents were consolidated into `Microsoft.EntityFrameworkCore.Relational` and `Microsoft.EntityFrameworkCore.Design`.</span></span>

<span data-ttu-id="7a414-209">Bu sağlayıcı tasarım zamanı paketler yayar.</span><span class="sxs-lookup"><span data-stu-id="7a414-209">This propagates into the provider design-time packages.</span></span> <span data-ttu-id="7a414-210">Bu paketleri (`Microsoft.EntityFrameworkCore.Sqlite.Design`, `Microsoft.EntityFrameworkCore.SqlServer.Design`, vs.) kaldırıldı ve içeriklerini ana sağlayıcısı paketlerine birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7a414-210">Those packages (`Microsoft.EntityFrameworkCore.Sqlite.Design`, `Microsoft.EntityFrameworkCore.SqlServer.Design`, etc.) were removed and their contents consolidated into the main provider packages.</span></span>

<span data-ttu-id="7a414-211">Etkinleştirmek için `Scaffold-DbContext` veya `dotnet ef dbcontext scaffold` EF Core 2.0 sürümünde, yalnızca tek bir sağlayıcı paketi başvurusu gerekir:</span><span class="sxs-lookup"><span data-stu-id="7a414-211">To enable `Scaffold-DbContext` or `dotnet ef dbcontext scaffold` in EF Core 2.0, you only need to reference the single provider package:</span></span>

``` xml
<PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer"
    Version="2.0.0" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Tools"
    Version="2.0.0"
    PrivateAssets="All" />
<DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet"
    Version="2.0.0" />
```
